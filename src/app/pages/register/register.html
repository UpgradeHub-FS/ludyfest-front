<section>
  <h2 class="my-5">Registro de usuarios</h2>

  <form [formGroup]="formulario" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label class="form-label">Nombre: </label>
      <input type="text" class="form-control" formControlName="name">
      @if(checkError('name', 'required')){
      <p class="error"> El campo nombre es obligatorio</p>

      }
      @if(checkError('name', 'minlength')){
      <p class="error"> El nombre debe tener mínimo 3 carácteres</p>

      }

      @if(checkError('name', 'minlength')){
      <p class="error">
        {{formulario.get('name')?.getError('minlength').actualLength}} /
        {{formulario.get('name')?.getError('minlength').requiredLength}}
      </p>
      }
    </div>
    <div class="mb-3">
      <label class="form-label">Email: </label>
      <input type="email" class="form-control" formControlName="email">
      @if(checkError('email', 'required')){
      <p class="error">El campo email es obligatorio</p>
      }
      @if(checkError('email', 'pattern')){
      <p class="error">El formato del email no es válido</p>
      }
    </div>
    <div class="mb-3">
      <label class="form-label">Password:</label>
      <div class="contenedor-input">
        <input [type]="verPassword ? 'text' : 'password'" class="form-control" formControlName="password">
        <button type="button" class="boton-ojito" (click)="verPassword = !verPassword">
          @if (!verPassword) {
          <!-- Ojo cerrado -->
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274
            4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
          </svg>
          } @else {
          <!-- Ojo tachado -->
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.269-2.943-9.543-7a10.038
            10.038 0 013.213-4.502m2.462-1.39A9.956 9.956 0 0112 5c4.477 0 8.268 2.943
            9.542 7a9.96 9.96 0 01-1.132 2.476M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3l18 18" />
          </svg>
          }
        </button>
      </div>

      @if (checkError('password', 'required')) {
      <p class="error">El campo contraseña es obligatorio.</p>
      }
      @if (checkError('password', 'pattern')) {
      <p class="error">
        La contraseña debe tener entre 5 y 10 caracteres, incluir al menos una mayúscula, una minúscula, un número y un
        carácter especial.
      </p>
      }
    </div>

    <div class="mb-3">
      <label class="form-label">Repite el password:</label>
      <div class="contenedor-input">
        <input [type]="verRepitePassword ? 'text' : 'password'" class="form-control" formControlName="repite_password">
        <button type="button" class="boton-ojito" (click)="verRepitePassword = !verRepitePassword">
          @if (!verRepitePassword) {
          <!-- Ojo cerrado -->
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274
            4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
          </svg>
          } @else {
          <!-- Ojo tachado -->
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.269-2.943-9.543-7a10.038
            10.038 0 013.213-4.502m2.462-1.39A9.956 9.956 0 0112 5c4.477 0 8.268 2.943
            9.542 7a9.96 9.96 0 01-1.132 2.476M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3l18 18" />
          </svg>
          }
        </button>
      </div>

      @if (formulario.get('repite_password')?.touched && formulario.hasError('passwordvalidator')) {
      <p class="error">Las contraseñas no coinciden.</p>
      }
      @if (checkError('repite_password', 'required')) {
      <p class="error">Este campo es obligatorio</p>
      }
    </div>




    <div class="d-grid gap-2">
      <input type="submit" value="Enviar" class=" btn btn-warning" [disabled]="!formulario.valid">
    </div>



  </form>
</section>